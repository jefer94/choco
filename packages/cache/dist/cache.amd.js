define(["express","body-parser","redis","chalk","@choco/middlewares"],(function(e,t,o,s,d){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,s=s&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s;var a="default"in d?d.default:d;const{log:r}=console,n=e();let l;a(n),n.use(t.json()),n.use(t.urlencoded({extended:!0})),n.post("/",async(e,t)=>{if(e.body)try{const{mode:s,key:d,value:a}=e.body;s&&d&&("set"===s&&a?(l.set(e.body.key,e.body.value,o.print),t.statusCode=204,t.send()):t.send(await function(e){return new Promise((t,o)=>{l.get(e,(e,s)=>{e&&o(e),t(s)})})}(e.body.key)))}catch(e){t.statusCode=500,t.json(JSON.stringify(e))}else t.statusCode=500,t.send("")}),l=o.createClient(),l.on("error",e=>{r(s.red(e))}),d.listen(n)}));
//# sourceMappingURL=cache.amd.js.map
