!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("express"),require("body-parser"),require("redis"),require("chalk"),require("@choco/middlewares")):"function"==typeof define&&define.amd?define(["express","body-parser","redis","chalk","@choco/middlewares"],t):t((e=e||self).express,e.bodyParser,e.redis,e.chalk,e.middlewares)}(this,(function(e,t,r,o,s){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,o=o&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o;var d="default"in s?s.default:s;const{log:a}=console,n=e();let l;d(n),n.use(t.json()),n.use(t.urlencoded({extended:!0})),n.post("/",async(e,t)=>{if(e.body)try{const{mode:o,key:s,value:d}=e.body;o&&s&&("set"===o&&d?(l.set(e.body.key,e.body.value,r.print),t.statusCode=204,t.send()):t.send(await function(e){return new Promise((t,r)=>{l.get(e,(e,o)=>{e&&r(e),t(o)})})}(e.body.key)))}catch(e){t.statusCode=500,t.json(JSON.stringify(e))}else t.statusCode=500,t.send("")}),l=r.createClient(),l.on("error",e=>{a(o.red(e))}),s.listen(n)}));
//# sourceMappingURL=cache.umd.js.map
