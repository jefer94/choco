import e from"express";import o from"body-parser";import{print as s,createClient as t}from"redis";import r from"chalk";import d,{listen as n}from"@choco/middlewares";const{log:i}=console,a=e();let m;d(a),a.use(o.json()),a.use(o.urlencoded({extended:!0})),a.post("/",async(e,o)=>{if(e.body)try{const{mode:t,key:r,value:d}=e.body;t&&r&&("set"===t&&d?(m.set(e.body.key,e.body.value,s),o.statusCode=204,o.send()):o.send(await function(e){return new Promise((o,s)=>{m.get(e,(e,t)=>{e&&s(e),o(t)})})}(e.body.key)))}catch(e){o.statusCode=500,o.json(JSON.stringify(e))}else o.statusCode=500,o.send("")}),m=t(),m.on("error",e=>{i(r.red(e))}),n(a);
//# sourceMappingURL=cache.esm.js.map
