"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}const t=e(require("express")),s=e(require("body-parser")),r=require("redis"),o=e(require("chalk")),n=require("@choco/middlewares"),d=e(n),{log:u}=console,i=t();let a;d(i),i.use(s.json()),i.use(s.urlencoded({extended:!0})),i.post("/",async(e,t)=>{if(e.body)try{const{mode:s,key:o,value:n}=e.body;s&&o&&("set"===s&&n?(a.set(e.body.key,e.body.value,r.print),t.statusCode=204,t.send()):t.send(await function(e){return new Promise((t,s)=>{a.get(e,(e,r)=>{e&&s(e),t(r)})})}(e.body.key)))}catch(e){t.statusCode=500,t.json(JSON.stringify(e))}else t.statusCode=500,t.send("")}),a=r.createClient(),a.on("error",e=>{u(o.red(e))}),n.listen(i);
//# sourceMappingURL=cache.cjs.js.map
